python -m venv venv

source venv/bin/activate   # Mac/Linux
venv\Scripts\activate      # Windows
.\venv\Scripts\Activate.ps1 #powershell

cd backend
uvicorn main:app --reload --host 0.0.0.0

npm run dev

ngrok config add-authtoken <YOUR_TOKEN>

ngrok http http://localhost:8000 OR ngrok http http://localhost:8080







# 🧠 Project Architecture & File-Level Overview (For Windsurf AI Context)

This project is a full-stack AI-powered call assistant and CRM platform, consisting of:

* 📞 An Express.js server handling inbound/outbound calls
* 🧠 A FastAPI backend handling analysis and webhook processing
* 🖥️ A React + TypeScript frontend for CRM and training dashboard
* 🗂️ Supabase for database + auth

---

## 🔧 Backend (Node.js / Express / FastAPI)

### `server/server.js`

* Express.js server that handles Twilio inbound calls at `/vapi/inbound-call`
* Reads caller and callee numbers, fetches corresponding AI agent from Supabase `ai_agents` table
* Calls are then routed to Vapi using their assistant ID

### `server/scheduleOutboundCalls.js`

* Runs a recurring job that queries `leads` table for `pending` call requests
* If found, triggers outbound call via Vapi
* Acts like a cron job loop, checking every 1 min

### `backend/main.py`

* FastAPI backend app
* Handles webhook events from Vapi (end of call, call analysis)
* Connects to Supabase and logs training calls + scores them
* Handles NLP tasks like sentiment scoring and feedback

### `backend/routes/training.py`

* FastAPI router for training-related endpoints
* Handles POST requests for analyzing training call data
* Connected to `/api/analyze-training-call`

---

## 🧩 Frontend Entry (React + Vite + Zustand)

### `src/App.tsx`

* Root-level app router
* Defines top-level routes and wraps pages in layouts

### `src/main.tsx`

* Entry point of the React app
* Mounts App.tsx to DOM and wraps in providers (e.g., `BrowserRouter`, state)

### `src/vite-env.d.ts`

* TypeScript types for Vite environment variables

---

## 🧱 Components (UI Building Blocks)

Each component is imported and reused across pages. All are written in TypeScript.

* `CallDetailModal.tsx` — Displays detailed view of a call log
* `TrainingCallDetailModal.tsx` — Displays AI training call summary
* `Pagination.tsx` — Basic pagination logic
* `Card.tsx` — UI card wrapper
* `ProtectedRoute.tsx` — Route guard for auth roles
* `ExportButton.tsx` — CSV export utility
* `AfterCallSummaryModal.tsx` — Modal shown after a call is completed
* `LeadForm.tsx` — Form for lead creation or editing
* `CallStats.tsx` — Summary call analytics
* `LeadDetailModal.tsx` — Lead details popup
* `ProgressBar.tsx` — Visual indicator for progress
* `AuthForm.tsx` — Login/register form component
* `CallLogs.tsx` — Table to list all call logs
* `AddUserForm.tsx` — Admin-only component to add users manually
* `TrainingModuleCard.tsx` — Card for training modules
* `ModeSwitcher.tsx` — Light/dark or CRM/training toggle
* `Layout.tsx` — Base layout with header/sidebar
* `Header.tsx` — Top navbar
* `Sidebar.tsx` — Left side menu
* `Button.tsx` — Standard button wrapper
* `CallFilters.tsx` — Filter UI for call logs
* `TrainingLayout.tsx` — Wrapper layout for training pages
* `CRMLayout.tsx` — Wrapper layout for CRM pages

---

## 📚 Lib (Shared Utilities)

* `database.types.ts` — Supabase type inference bindings
* `supabaseAdmin.ts` — Admin Supabase client using service role key
* `supabase.ts` — Regular Supabase client using anon/public key

---

## 🔐 API Routes (Frontend-Facing)

* `api/createUser.tsx` — Creates user in Supabase via admin client (triggered from UI)
* `pages/api/webhook.ts` — Handles Vapi webhook events (SSR-compatible)

---

## 🖼️ Pages (Main UI Screens)

* `Settings.tsx` — Account and platform settings
* `Dashboard.tsx` — Overall KPI overview
* `Calls.tsx` — List of all AI call logs
* `Agents.tsx` — List of active agents and assistant status
* `modules.tsx` — Lists training modules
* `Analytics.tsx` — KPI charts and call stats
* `ComingSoon.tsx` — Placeholder page
* `Profile.tsx` — User profile & role
* `Leads.tsx` — List and status of leads
* `Teams.tsx` — Admin management of team members
* `Training.tsx` — Overview of training-related content
* `Homepage.tsx` — Home landing page after login

---

## 🧑‍🏫 Pages > Training Subpages

* `training/leaderboard.tsx` — Ranking of training scores
* `training/TrainingCalls.tsx` — List of past training calls
* `training/progress.tsx` — Progress tracking
* `training/simulator.tsx` — AI voice call simulator

---

## 🧠 Zustand Stores (State Management)

* `training.ts` — State for training modules & calls
* `calls.ts` — State for call logs and filters
* `leads.ts` — State for leads data
* `auth.ts` — Handles auth state, roles, session
* `useAppMode.ts` — Switch between CRM/training modes
* `waitlist.ts` — State for waitlist registration (used on marketing site)

---

## ✅ Summary Suggestions for Windsurf AI

* This project is a full-stack call assistant CRM
* Use Express + FastAPI for backend, React + Zustand frontend, Supabase backend
* For context-aware completions, understand these key files:

  * `server/server.js`: handles inbound calls
  * `backend/main.py`: logs & analyzes calls
  * `src/pages/*`: each file is a page
  * `src/components/*`: reusable UI elements
  * `src/store/*`: zustand state containers

Use this file-level map to understand what logic lives where. Let me know if you want explanation of call flow, training modules, or agent creation logic.

Aşağıda her tablo için:

Ne işe yarar

En önemli alanlar

AI için neden önemli olduğuna dair bilgi var

🧠 ai_agents
Sistemdeki her AI asistan için konfigürasyon barındırır.

id: agent ID (UUID, primary key)

user_id: Sahip olan kullanıcı (FK → users.id)

vapi_agent_id: Vapi tarafındaki asistan ID'si

phone_number: Bu asistana atanmış numara

model_name / model_provider: GPT-4o vs.

first_message: Asistanın açılış cümlesi

last_assigned: En son görev aldığı zaman

🔗 Kritik çünkü call_logs, leads gibi her şey buna bağlı.

🧠 call_logs
Gerçekleşmiş tüm telefon çağrılarının kayıtları burada tutulur.

id, call_id, agent_id, clinic_name, caller_number, dialed_number

duration, transcript, recording_url, score, sentiment

call_start, call_end, created_at, twilio_sid

provider, topic_summary, issues_detected, feedback

🔗 En kritik tablo. UI’da görünen “çağrı detayları”, analiz, skor vs. buradan gelir.
📍 Vapi webhook’u → buraya log yazar.

🧠 event_logs
Vapi gibi servislerden gelen event payload'ları buraya düşer. Gelişmiş debugging/logging için kullanılır.

call_id, event_type, payload

🧠 leads
Kliniklere ait potansiyel müşteriler burada tutulur.

id, clinic_name, full_name, phone_number, email, status

source, notes, call_status, last_contact_date, agent_id, vapi_agent_id, user_id

📍 status = new, call_status = pending gibi değerlerle scheduleOutboundCalls.js çalışır.

🧠 training_calls
Eğitim amacıyla yapılan simülasyon aramalar. Training modülünden gelir.

user_id, agent_id, module_id, module_name

transcript, score, sentiment, feedback, analysis

duration, call_status, recording_url

📍 training/simulator.tsx dosyası bu tabloya kayıt açar.

🧠 training_sessions
Simülasyonun UI’da temsil edildiği oturumlar. User → module bağlantısını içerir.

user_id, module_id, started_at, ended_at, score, sentiment, feedback

🧠 training_modules
Her eğitim oturumu için senaryo. UI’da kart olarak görünür.

id, name, persona_type, difficulty, category_id, title

🧠 training_feedback
Adminler veya sistemin AI'si tarafından yapılan geri bildirimler.

session_id, type, message

🧠 training_leaderboard
Eğitim skoru puan tablosu.

user_id, xp, rank

🧠 users
Tüm kullanıcılar burada tutulur (admin, agent, vs.)

id, email, full_name, role (admin, agent), clinic_name, admin_id

📍 Role bazlı UI routing ProtectedRoute.tsx üzerinden buna göre yapılır.

🧠 teams & team_members
Kullanıcıları takım yapısına bağlar.

teams: id, name, admin_id

team_members: team_id, user_id, role

🧠 logs
Uygulama içi aksiyon logları (örneğin kullanıcı bir işlem yaptıysa)

user_id, action, details (JSON)

🧠 waitlist
Bekleme listesi — henüz aktif olmayan kullanıcılar için

email, source, created_at

🔗 Foreign Key İlişkileri (Özetlenmiş)
call_logs.agent_id → ai_agents.id

ai_agents.user_id → users.id

leads.user_id, leads.agent_id → users.id, ai_agents.id

training_calls.agent_id → training_agents.id

training_calls.module_id → training_modules.id

training_feedback.session_id → training_sessions.id

team_members.user_id → users.id

🧠 Enum Değerleri
ts
Kopyala
Düzenle
call_type: 'inbound' | 'outbound' | 'webCall'
status (lead): 'new' | 'called' | 'archived'
call_status (lead): 'pending' | 'called'
role (user): 'admin' | 'agent'
sentiment: 'positive' | 'neutral' | 'negative'


Supabase Table Details Below:
✅ Tüm Tablolar + Sütunlar (Tek SQL Komutu)

[
  {
    "table_name": "ai_agents",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "team_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "model_provider",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'openai'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "model_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'gpt-4o'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "first_message",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'Hello, how can I assist you today?'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "last_assigned",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "CURRENT_TIMESTAMP"
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "id",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "caller_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "call_logs",
    "column_name": "recording_url",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'completed'::text"
  },
  {
    "table_name": "call_logs",
    "column_name": "timestamp",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "ended_reason",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "summary",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "messages",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "twilio_sid",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "dialed_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "topic_summary",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_start",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_end",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "provider",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "issues_detected",
    "data_type": "json",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "event_logs",
    "column_name": "call_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "event_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "payload",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "timezone('utc'::text, now())"
  },
  {
    "table_name": "leads",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "leads",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "full_name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "status",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": "'new'::text"
  },
  {
    "table_name": "leads",
    "column_name": "source",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "notes",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "last_contact_date",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "leads",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "leads",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "call_status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'pending'::text"
  },
  {
    "table_name": "leads",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "vapi_agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "logs",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "action",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "details",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "timestamp",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "team_members",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "team_members",
    "column_name": "team_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "team_members",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "team_members",
    "column_name": "role",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'user'::text"
  },
  {
    "table_name": "teams",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "teams",
    "column_name": "admin_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "teams",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_agents",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_agents",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_calls",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_calls",
    "column_name": "call_status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'completed'::text"
  },
  {
    "table_name": "training_calls",
    "column_name": "analysis",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "recording_url",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'neutral'::text"
  },
  {
    "table_name": "training_calls",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "module_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_categories",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_feedback",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_feedback",
    "column_name": "session_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "message",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "xp",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "rank",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "updated_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_modules",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_modules",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "persona_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "difficulty",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "1"
  },
  {
    "table_name": "training_modules",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_modules",
    "column_name": "title",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "category_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_sessions",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "started_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_sessions",
    "column_name": "ended_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "call_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "passed",
    "data_type": "boolean",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "users",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "users",
    "column_name": "role",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'admin'::text"
  },
  {
    "table_name": "users",
    "column_name": "admin_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "full_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "waitlist",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "source",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  }
]
🔁 Opsiyonel: Enum ve Relationship Bilgileri de Lazımsa

[
  {
    "enum_name": "call_type",
    "enum_value": "inbound"
  },
  {
    "enum_name": "call_type",
    "enum_value": "outbound"
  },
  {
    "enum_name": "call_type",
    "enum_value": "webCall"
  }
]



[
  {
    "table_name": "ai_agents",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "call_logs",
    "column_name": "agent_id",
    "foreign_table": "ai_agents",
    "foreign_column": "id"
  },
  {
    "table_name": "leads",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "logs",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "team_members",
    "column_name": "team_id",
    "foreign_table": "teams",
    "foreign_column": "id"
  },
  {
    "table_name": "team_members",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "teams",
    "column_name": "admin_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "training_agents",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_calls",
    "column_name": "agent_id",
    "foreign_table": "training_agents",
    "foreign_column": "id"
  },
  {
    "table_name": "training_calls",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_feedback",
    "column_name": "session_id",
    "foreign_table": "training_sessions",
    "foreign_column": "id"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "training_modules",
    "column_name": "category_id",
    "foreign_table": "training_categories",
    "foreign_column": "id"
  },
  {
    "table_name": "training_sessions",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_sessions",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  }
]

