python -m venv venv

source venv/bin/activate   # Mac/Linux
venv\Scripts\activate      # Windows
.\venv\Scripts\Activate.ps1 #powershell

cd backend
uvicorn main:app --reload --host 0.0.0.0

npm run dev

ngrok config add-authtoken <YOUR_TOKEN>

ngrok http http://localhost:8000 OR ngrok http http://localhost:8080







# ğŸ§  Project Architecture & File-Level Overview (For Windsurf AI Context)

This project is a full-stack AI-powered call assistant and CRM platform, consisting of:

* ğŸ“ An Express.js server handling inbound/outbound calls
* ğŸ§  A FastAPI backend handling analysis and webhook processing
* ğŸ–¥ï¸ A React + TypeScript frontend for CRM and training dashboard
* ğŸ—‚ï¸ Supabase for database + auth

---

## ğŸ”§ Backend (Node.js / Express / FastAPI)

### `server/server.js`

* Express.js server that handles Twilio inbound calls at `/vapi/inbound-call`
* Reads caller and callee numbers, fetches corresponding AI agent from Supabase `ai_agents` table
* Calls are then routed to Vapi using their assistant ID

### `server/scheduleOutboundCalls.js`

* Runs a recurring job that queries `leads` table for `pending` call requests
* If found, triggers outbound call via Vapi
* Acts like a cron job loop, checking every 1 min

### `backend/main.py`

* FastAPI backend app
* Handles webhook events from Vapi (end of call, call analysis)
* Connects to Supabase and logs training calls + scores them
* Handles NLP tasks like sentiment scoring and feedback

### `backend/routes/training.py`

* FastAPI router for training-related endpoints
* Handles POST requests for analyzing training call data
* Connected to `/api/analyze-training-call`

---

## ğŸ§© Frontend Entry (React + Vite + Zustand)

### `src/App.tsx`

* Root-level app router
* Defines top-level routes and wraps pages in layouts

### `src/main.tsx`

* Entry point of the React app
* Mounts App.tsx to DOM and wraps in providers (e.g., `BrowserRouter`, state)

### `src/vite-env.d.ts`

* TypeScript types for Vite environment variables

---

## ğŸ§± Components (UI Building Blocks)

Each component is imported and reused across pages. All are written in TypeScript.

* `CallDetailModal.tsx` â€” Displays detailed view of a call log
* `TrainingCallDetailModal.tsx` â€” Displays AI training call summary
* `Pagination.tsx` â€” Basic pagination logic
* `Card.tsx` â€” UI card wrapper
* `ProtectedRoute.tsx` â€” Route guard for auth roles
* `ExportButton.tsx` â€” CSV export utility
* `AfterCallSummaryModal.tsx` â€” Modal shown after a call is completed
* `LeadForm.tsx` â€” Form for lead creation or editing
* `CallStats.tsx` â€” Summary call analytics
* `LeadDetailModal.tsx` â€” Lead details popup
* `ProgressBar.tsx` â€” Visual indicator for progress
* `AuthForm.tsx` â€” Login/register form component
* `CallLogs.tsx` â€” Table to list all call logs
* `AddUserForm.tsx` â€” Admin-only component to add users manually
* `TrainingModuleCard.tsx` â€” Card for training modules
* `ModeSwitcher.tsx` â€” Light/dark or CRM/training toggle
* `Layout.tsx` â€” Base layout with header/sidebar
* `Header.tsx` â€” Top navbar
* `Sidebar.tsx` â€” Left side menu
* `Button.tsx` â€” Standard button wrapper
* `CallFilters.tsx` â€” Filter UI for call logs
* `TrainingLayout.tsx` â€” Wrapper layout for training pages
* `CRMLayout.tsx` â€” Wrapper layout for CRM pages

---

## ğŸ“š Lib (Shared Utilities)

* `database.types.ts` â€” Supabase type inference bindings
* `supabaseAdmin.ts` â€” Admin Supabase client using service role key
* `supabase.ts` â€” Regular Supabase client using anon/public key

---

## ğŸ” API Routes (Frontend-Facing)

* `api/createUser.tsx` â€” Creates user in Supabase via admin client (triggered from UI)
* `pages/api/webhook.ts` â€” Handles Vapi webhook events (SSR-compatible)

---

## ğŸ–¼ï¸ Pages (Main UI Screens)

* `Settings.tsx` â€” Account and platform settings
* `Dashboard.tsx` â€” Overall KPI overview
* `Calls.tsx` â€” List of all AI call logs
* `Agents.tsx` â€” List of active agents and assistant status
* `modules.tsx` â€” Lists training modules
* `Analytics.tsx` â€” KPI charts and call stats
* `ComingSoon.tsx` â€” Placeholder page
* `Profile.tsx` â€” User profile & role
* `Leads.tsx` â€” List and status of leads
* `Teams.tsx` â€” Admin management of team members
* `Training.tsx` â€” Overview of training-related content
* `Homepage.tsx` â€” Home landing page after login

---

## ğŸ§‘â€ğŸ« Pages > Training Subpages

* `training/leaderboard.tsx` â€” Ranking of training scores
* `training/TrainingCalls.tsx` â€” List of past training calls
* `training/progress.tsx` â€” Progress tracking
* `training/simulator.tsx` â€” AI voice call simulator

---

## ğŸ§  Zustand Stores (State Management)

* `training.ts` â€” State for training modules & calls
* `calls.ts` â€” State for call logs and filters
* `leads.ts` â€” State for leads data
* `auth.ts` â€” Handles auth state, roles, session
* `useAppMode.ts` â€” Switch between CRM/training modes
* `waitlist.ts` â€” State for waitlist registration (used on marketing site)

---

## âœ… Summary Suggestions for Windsurf AI

* This project is a full-stack call assistant CRM
* Use Express + FastAPI for backend, React + Zustand frontend, Supabase backend
* For context-aware completions, understand these key files:

  * `server/server.js`: handles inbound calls
  * `backend/main.py`: logs & analyzes calls
  * `src/pages/*`: each file is a page
  * `src/components/*`: reusable UI elements
  * `src/store/*`: zustand state containers

Use this file-level map to understand what logic lives where. Let me know if you want explanation of call flow, training modules, or agent creation logic.

AÅŸaÄŸÄ±da her tablo iÃ§in:

Ne iÅŸe yarar

En Ã¶nemli alanlar

AI iÃ§in neden Ã¶nemli olduÄŸuna dair bilgi var

ğŸ§  ai_agents
Sistemdeki her AI asistan iÃ§in konfigÃ¼rasyon barÄ±ndÄ±rÄ±r.

id: agent ID (UUID, primary key)

user_id: Sahip olan kullanÄ±cÄ± (FK â†’ users.id)

vapi_agent_id: Vapi tarafÄ±ndaki asistan ID'si

phone_number: Bu asistana atanmÄ±ÅŸ numara

model_name / model_provider: GPT-4o vs.

first_message: AsistanÄ±n aÃ§Ä±lÄ±ÅŸ cÃ¼mlesi

last_assigned: En son gÃ¶rev aldÄ±ÄŸÄ± zaman

ğŸ”— Kritik Ã§Ã¼nkÃ¼ call_logs, leads gibi her ÅŸey buna baÄŸlÄ±.

ğŸ§  call_logs
GerÃ§ekleÅŸmiÅŸ tÃ¼m telefon Ã§aÄŸrÄ±larÄ±nÄ±n kayÄ±tlarÄ± burada tutulur.

id, call_id, agent_id, clinic_name, caller_number, dialed_number

duration, transcript, recording_url, score, sentiment

call_start, call_end, created_at, twilio_sid

provider, topic_summary, issues_detected, feedback

ğŸ”— En kritik tablo. UIâ€™da gÃ¶rÃ¼nen â€œÃ§aÄŸrÄ± detaylarÄ±â€, analiz, skor vs. buradan gelir.
ğŸ“ Vapi webhookâ€™u â†’ buraya log yazar.

ğŸ§  event_logs
Vapi gibi servislerden gelen event payload'larÄ± buraya dÃ¼ÅŸer. GeliÅŸmiÅŸ debugging/logging iÃ§in kullanÄ±lÄ±r.

call_id, event_type, payload

ğŸ§  leads
Kliniklere ait potansiyel mÃ¼ÅŸteriler burada tutulur.

id, clinic_name, full_name, phone_number, email, status

source, notes, call_status, last_contact_date, agent_id, vapi_agent_id, user_id

ğŸ“ status = new, call_status = pending gibi deÄŸerlerle scheduleOutboundCalls.js Ã§alÄ±ÅŸÄ±r.

ğŸ§  training_calls
EÄŸitim amacÄ±yla yapÄ±lan simÃ¼lasyon aramalar. Training modÃ¼lÃ¼nden gelir.

user_id, agent_id, module_id, module_name

transcript, score, sentiment, feedback, analysis

duration, call_status, recording_url

ğŸ“ training/simulator.tsx dosyasÄ± bu tabloya kayÄ±t aÃ§ar.

ğŸ§  training_sessions
SimÃ¼lasyonun UIâ€™da temsil edildiÄŸi oturumlar. User â†’ module baÄŸlantÄ±sÄ±nÄ± iÃ§erir.

user_id, module_id, started_at, ended_at, score, sentiment, feedback

ğŸ§  training_modules
Her eÄŸitim oturumu iÃ§in senaryo. UIâ€™da kart olarak gÃ¶rÃ¼nÃ¼r.

id, name, persona_type, difficulty, category_id, title

ğŸ§  training_feedback
Adminler veya sistemin AI'si tarafÄ±ndan yapÄ±lan geri bildirimler.

session_id, type, message

ğŸ§  training_leaderboard
EÄŸitim skoru puan tablosu.

user_id, xp, rank

ğŸ§  users
TÃ¼m kullanÄ±cÄ±lar burada tutulur (admin, agent, vs.)

id, email, full_name, role (admin, agent), clinic_name, admin_id

ğŸ“ Role bazlÄ± UI routing ProtectedRoute.tsx Ã¼zerinden buna gÃ¶re yapÄ±lÄ±r.

ğŸ§  teams & team_members
KullanÄ±cÄ±larÄ± takÄ±m yapÄ±sÄ±na baÄŸlar.

teams: id, name, admin_id

team_members: team_id, user_id, role

ğŸ§  logs
Uygulama iÃ§i aksiyon loglarÄ± (Ã¶rneÄŸin kullanÄ±cÄ± bir iÅŸlem yaptÄ±ysa)

user_id, action, details (JSON)

ğŸ§  waitlist
Bekleme listesi â€” henÃ¼z aktif olmayan kullanÄ±cÄ±lar iÃ§in

email, source, created_at

ğŸ”— Foreign Key Ä°liÅŸkileri (Ã–zetlenmiÅŸ)
call_logs.agent_id â†’ ai_agents.id

ai_agents.user_id â†’ users.id

leads.user_id, leads.agent_id â†’ users.id, ai_agents.id

training_calls.agent_id â†’ training_agents.id

training_calls.module_id â†’ training_modules.id

training_feedback.session_id â†’ training_sessions.id

team_members.user_id â†’ users.id

ğŸ§  Enum DeÄŸerleri
ts
Kopyala
DÃ¼zenle
call_type: 'inbound' | 'outbound' | 'webCall'
status (lead): 'new' | 'called' | 'archived'
call_status (lead): 'pending' | 'called'
role (user): 'admin' | 'agent'
sentiment: 'positive' | 'neutral' | 'negative'


Supabase Table Details Below:
âœ… TÃ¼m Tablolar + SÃ¼tunlar (Tek SQL Komutu)

[
  {
    "table_name": "ai_agents",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "team_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "ai_agents",
    "column_name": "model_provider",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'openai'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "model_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'gpt-4o'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "first_message",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'Hello, how can I assist you today?'::text"
  },
  {
    "table_name": "ai_agents",
    "column_name": "last_assigned",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "CURRENT_TIMESTAMP"
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_2",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "vapi_agent_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "ai_agents_backup_3",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "id",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "caller_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "call_logs",
    "column_name": "recording_url",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'completed'::text"
  },
  {
    "table_name": "call_logs",
    "column_name": "timestamp",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "call_logs",
    "column_name": "ended_reason",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "summary",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "messages",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "twilio_sid",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "dialed_number",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "topic_summary",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_start",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "call_end",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "provider",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "issues_detected",
    "data_type": "json",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "call_logs",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "event_logs",
    "column_name": "call_id",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "event_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "payload",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "event_logs",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "timezone('utc'::text, now())"
  },
  {
    "table_name": "leads",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "leads",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "full_name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "phone_number",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "status",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": "'new'::text"
  },
  {
    "table_name": "leads",
    "column_name": "source",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "notes",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "last_contact_date",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "leads",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "leads",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "call_status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'pending'::text"
  },
  {
    "table_name": "leads",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "leads",
    "column_name": "vapi_agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "logs",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "action",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "details",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "logs",
    "column_name": "timestamp",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "team_members",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "team_members",
    "column_name": "team_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "team_members",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "team_members",
    "column_name": "role",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'user'::text"
  },
  {
    "table_name": "teams",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "teams",
    "column_name": "admin_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "teams",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_agents",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_agents",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_agents",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_calls",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "agent_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_calls",
    "column_name": "call_status",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'completed'::text"
  },
  {
    "table_name": "training_calls",
    "column_name": "analysis",
    "data_type": "jsonb",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "recording_url",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'neutral'::text"
  },
  {
    "table_name": "training_calls",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "module_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_calls",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_categories",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_categories",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_feedback",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_feedback",
    "column_name": "session_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "message",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_feedback",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "xp",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "rank",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "0"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "updated_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_modules",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_modules",
    "column_name": "name",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "description",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "persona_type",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "difficulty",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": "1"
  },
  {
    "table_name": "training_modules",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_modules",
    "column_name": "title",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_modules",
    "column_name": "category_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "training_sessions",
    "column_name": "user_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "module_id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "transcript",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "duration",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "score",
    "data_type": "integer",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "sentiment",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "started_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "training_sessions",
    "column_name": "ended_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "call_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "feedback",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "passed",
    "data_type": "boolean",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "training_sessions",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "users",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "clinic_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "created_at",
    "data_type": "timestamp without time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  },
  {
    "table_name": "users",
    "column_name": "role",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": "'admin'::text"
  },
  {
    "table_name": "users",
    "column_name": "admin_id",
    "data_type": "uuid",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "full_name",
    "data_type": "text",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "users",
    "column_name": "updated_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "id",
    "data_type": "uuid",
    "is_nullable": "NO",
    "column_default": "gen_random_uuid()"
  },
  {
    "table_name": "waitlist",
    "column_name": "email",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "source",
    "data_type": "text",
    "is_nullable": "NO",
    "column_default": null
  },
  {
    "table_name": "waitlist",
    "column_name": "created_at",
    "data_type": "timestamp with time zone",
    "is_nullable": "YES",
    "column_default": "now()"
  }
]
ğŸ” Opsiyonel: Enum ve Relationship Bilgileri de LazÄ±msa

[
  {
    "enum_name": "call_type",
    "enum_value": "inbound"
  },
  {
    "enum_name": "call_type",
    "enum_value": "outbound"
  },
  {
    "enum_name": "call_type",
    "enum_value": "webCall"
  }
]



[
  {
    "table_name": "ai_agents",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "call_logs",
    "column_name": "agent_id",
    "foreign_table": "ai_agents",
    "foreign_column": "id"
  },
  {
    "table_name": "leads",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "logs",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "team_members",
    "column_name": "team_id",
    "foreign_table": "teams",
    "foreign_column": "id"
  },
  {
    "table_name": "team_members",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "teams",
    "column_name": "admin_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "training_agents",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_calls",
    "column_name": "agent_id",
    "foreign_table": "training_agents",
    "foreign_column": "id"
  },
  {
    "table_name": "training_calls",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_feedback",
    "column_name": "session_id",
    "foreign_table": "training_sessions",
    "foreign_column": "id"
  },
  {
    "table_name": "training_leaderboard",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  },
  {
    "table_name": "training_modules",
    "column_name": "category_id",
    "foreign_table": "training_categories",
    "foreign_column": "id"
  },
  {
    "table_name": "training_sessions",
    "column_name": "module_id",
    "foreign_table": "training_modules",
    "foreign_column": "id"
  },
  {
    "table_name": "training_sessions",
    "column_name": "user_id",
    "foreign_table": "users",
    "foreign_column": "id"
  }
]

